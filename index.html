<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SMB | Dashboard</title>

<link rel="icon" type="image/png" sizes="192x192" href="https://i.postimg.cc/QNkbRTbS/1.png">
<link rel="shortcut icon" href="https://i.postimg.cc/QNkbRTbS/1.png">

<script src="https://accounts.google.com/gsi/client" async defer></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
:root{
--primary:#1f2937;
--accent:#dc143c;
--bg:#f0f2f5;
--white:#ffffff;
--text-dark:#1f2937;
--text-muted:#6b7280;
--transition:all .3s cubic-bezier(.4,0,.2,1);
}

*{box-sizing:border-box;}

body{
margin:0;
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
background:var(--bg);
font-family:'Segoe UI',system-ui,sans-serif;
padding:20px;
color:var(--text-dark);
}

.container{
display:flex;
flex-direction:column;
align-items:center;
gap:25px;
width:100%;
max-width:1000px;
}

#login,#user-info{
background:var(--white);
padding:25px;
border-radius:24px;
box-shadow:0 15px 35px rgba(0,0,0,.05);
text-align:center;
width:100%;
max-width:400px;
}

#user-info{
display:flex;
align-items:center;
gap:15px;
text-align:left;
}

#user-info img{
border-radius:50%;
width:45px;
height:45px;
border:2px solid var(--accent);
}

#logout-btn{
background:#f1f5f9;
border:none;
width:35px;
height:35px;
border-radius:10px;
cursor:pointer;
transition:var(--transition);
}

#logout-btn:hover{
background:var(--accent);
color:white;
}

.top-buttons{
display:flex;
gap:20px;
width:100%;
}

.top-card{
flex:1;
background:var(--white);
border-radius:20px;
box-shadow:0 10px 25px rgba(0,0,0,.03);
transition:var(--transition);
aspect-ratio:1/1;
display:flex;
align-items:center;
justify-content:center;
cursor:pointer;
}

.top-card:hover{
transform:translateY(-5px);
box-shadow:0 15px 30px rgba(0,0,0,.08);
}

.top-card i{
font-size:32px;
color:var(--text-muted);
}

.action-grid{
display:grid;
grid-template-columns:repeat(2,1fr);
gap:20px;
width:100%;
}

.action-card{
background:var(--white);
border-radius:20px;
box-shadow:0 10px 25px rgba(0,0,0,.03);
transition:var(--transition);
overflow:hidden;
}

.action-btn{
width:100%;
aspect-ratio:1/1;
border:none;
background:transparent;
cursor:pointer;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
gap:10px;
}

.action-btn i{
font-size:28px;
color:var(--text-muted);
}

.action-card:hover{
transform:translateY(-5px);
box-shadow:0 15px 30px rgba(0,0,0,.08);
}

.action-dropdown{
max-height:0;
overflow:hidden;
transition:max-height .3s ease;
background:#f8fafc;
display:flex;
flex-direction:column;
}

.action-dropdown.active{
max-height:400px;
}

.action-link{
padding:12px 20px;
text-decoration:none;
color:var(--text-dark);
font-size:14px;
font-weight:600;
border-bottom:1px solid #eee;
cursor:pointer;
}

.action-link:hover{
background:var(--primary);
color:white;
}

.iframe-overlay{
position:fixed;
inset:0;
background:rgba(0,0,0,.4);
z-index:9999;
display:flex;
opacity:0;
pointer-events:none;
transition:opacity .3s ease;
}

.iframe-overlay.active{
opacity:1;
pointer-events:all;
}

.iframe-container{
flex:1;
background:white;
}

.iframe-container iframe{
width:100%;
height:100%;
border:none;
}
</style>
</head>

<body>

<div class="container">

<div id="login">
<h2>SMB Login</h2>
<div id="g_id_onload"
data-client_id="328749588235-bgfeukqogpoq2ha65j7j0vk840hctiaq.apps.googleusercontent.com"
data-callback="handleCredentialResponse"
data-auto_prompt="false"></div>
<div class="g_id_signin" data-type="standard" data-shape="pill"></div>
</div>

<div id="user-info" style="display:none;">
<img id="user-pic">
<div>
<p id="user-name"></p>
<p id="user-email" style="font-size:12px;color:var(--text-muted);"></p>
</div>
<button id="logout-btn" onclick="signOut()">
<i class="fas fa-sign-out-alt"></i>
</button>
</div>

<div class="main-content" id="main-content" style="display:none;width:100%;">

<div class="top-buttons">
<div class="top-card" onclick="openIframe('https://smart-bowling.github.io/MANUALS-SMART/')">
<i class="fas fa-book"></i>
</div>

<div class="top-card" onclick="openIframe('https://smart-bowling.github.io/PARTS-STORE/')">
<i class="fas fa-shopping-cart"></i>
</div>
</div>

<div class="action-grid">

<div class="action-card">
<button class="action-btn" onclick="toggleDrop('parts')">
<i class="fas fa-cog"></i>
<span>PARTS</span>
</button>
<div class="action-dropdown" id="drop-parts">
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PARTS-KH/')">Lucky Strike KH</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PARTS-BB/')">Blockbuster</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PARTS-SKYMALL/')">Skymall</div>
</div>
</div>

<div class="action-card">
<button class="action-btn" onclick="toggleDrop('maintenance')">
<i class="fas fa-tools"></i>
<span>MAINTENANCE</span>
</button>
<div class="action-dropdown" id="drop-maintenance">
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/SMB-LS-KH/')">Lucky Strike KH</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/SMB-BB/')">Blockbuster</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/SMB-SKYMALL/')">Skymall</div>
</div>
</div>

<div class="action-card">
<button class="action-btn" onclick="toggleDrop('fps')">
<i class="fas fa-chart-line"></i>
<span>FPS</span>
</button>
<div class="action-dropdown" id="drop-fps">
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PS-STOP-KH/')">Lucky Strike KH</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PS-STOP-BB/')">Blockbuster</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/PS-STOP-SKYMALL/')">Skymall</div>
</div>
</div>

<div class="action-card">
<button class="action-btn" onclick="toggleDrop('analysis')">
<i class="fas fa-bowling-ball"></i>
<span>ANALYSIS</span>
</button>
<div class="action-dropdown" id="drop-analysis">
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/ANALYSIS-BB/')">Blockbuster</div>
<div class="action-link" onclick="openIframe('https://smart-bowling.github.io/ANALYSIS-SM/')">Skymall</div>
</div>
</div>

</div>
</div>
</div>

<div class="iframe-overlay" id="iframeOverlay" onclick="closeIframe(event)">
<div class="iframe-container">
<iframe id="mainIframe"></iframe>
</div>
</div>

<script>
function openIframe(url){
document.getElementById('mainIframe').src=url;
document.getElementById('iframeOverlay').classList.add('active');
document.body.style.overflow='hidden';
}

function closeIframe(e){
if(e.target.id==='iframeOverlay'){
document.getElementById('iframeOverlay').classList.remove('active');
document.getElementById('mainIframe').src='';
document.body.style.overflow='';
}
}

function toggleDrop(id){
document.querySelectorAll('.action-dropdown').forEach(d=>d.classList.remove('active'));
document.getElementById('drop-'+id).classList.toggle('active');
}

function handleCredentialResponse(response){
const payload=JSON.parse(atob(response.credential.split('.')[1]));
loginUser(payload);
}

function loginUser(payload){
document.getElementById('login').style.display='none';
document.getElementById('user-info').style.display='flex';
document.getElementById('main-content').style.display='block';
document.getElementById('user-name').textContent=payload.name;
document.getElementById('user-email').textContent=payload.email;
document.getElementById('user-pic').src=payload.picture;
localStorage.setItem('userLoggedIn','true');
localStorage.setItem('userName',payload.name);
localStorage.setItem('userEmail',payload.email);
localStorage.setItem('userPic',payload.picture);
}

function signOut(){
localStorage.clear();
location.reload();
}

window.onload=()=>{
if(localStorage.getItem('userLoggedIn')==='true'){
loginUser({
name:localStorage.getItem('userName'),
email:localStorage.getItem('userEmail'),
picture:localStorage.getItem('userPic')
});
}
}
</script>

</body>
</html>
